var ho;
(function (ho) {
    var classloader;
    (function (classloader) {
        var util;
        (function (util) {
            function get(path, obj) {
                if (obj === void 0) { obj = window; }
                path.split('.').map(function (part) {
                    obj = obj[part];
                });
                return obj;
            }
            util.get = get;
        })(util = classloader.util || (classloader.util = {}));
    })(classloader = ho.classloader || (ho.classloader = {}));
})(ho || (ho = {}));

var ho;
(function (ho) {
    var classloader;
    (function (classloader) {
        var util;
        (function (util) {
            function expose(name, obj) {
                var path = name.split('.');
                name = path.pop();
                var global = window;
                path.map(function (part) {
                    global[part] = global[part] || {};
                    global = global[part];
                });
                if (!!global[name])
                    throw "Global object " + path.join('.') + "." + name + " already exists";
                global[name] = obj;
            }
            util.expose = expose;
        })(util = classloader.util || (classloader.util = {}));
    })(classloader = ho.classloader || (ho.classloader = {}));
})(ho || (ho = {}));

var ho;
(function (ho) {
    var classloader;
    (function (classloader) {
        var xhr;
        (function (xhr) {
            function get(url) {
                return new ho.promise.Promise(function (resolve, reject) {
                    var xmlhttp = new XMLHttpRequest();
                    xmlhttp.onreadystatechange = function () {
                        if (xmlhttp.readyState == 4) {
                            var resp = xmlhttp.responseText;
                            if (xmlhttp.status == 200) {
                                resolve(resp);
                            }
                            else {
                                reject(resp);
                            }
                        }
                    };
                    xmlhttp.open('GET', url);
                    xmlhttp.send();
                });
            }
            xhr.get = get;
        })(xhr = classloader.xhr || (classloader.xhr = {}));
    })(classloader = ho.classloader || (ho.classloader = {}));
})(ho || (ho = {}));



var ho;
(function (ho) {
    var classloader;
    (function (classloader) {
        var LoadArguments = (function () {
            function LoadArguments(arg, resolveUrl) {
                this.name = arg.name;
                this.url = arg.url || resolveUrl(arg.name);
                this.parent = arg.parent || true;
                this.expose = arg.expose || true;
                this.super = arg.super;
            }
            return LoadArguments;
        })();
        classloader.LoadArguments = LoadArguments;
    })(classloader = ho.classloader || (ho.classloader = {}));
})(ho || (ho = {}));

var ho;
(function (ho) {
    var classloader;
    (function (classloader) {
        var LoaderConfig = (function () {
            function LoaderConfig(c) {
                if (c === void 0) { c = {}; }
                this.loadType = c.loadType || classloader.LoadType.EVAL;
                this.urlTemplate = c.urlTemplate || "${name}.js";
                this.useDir = typeof c.useDir === 'boolean' ? c.useDir : true;
                this.useMin = typeof c.useMin === 'boolean' ? c.useMin : false;
                //this.exists = c.exists || this.exists.bind(this);
                this.cache = typeof c.cache === 'boolean' ? c.cache : true;
            }
            return LoaderConfig;
        })();
        classloader.LoaderConfig = LoaderConfig;
    })(classloader = ho.classloader || (ho.classloader = {}));
})(ho || (ho = {}));

var ho;
(function (ho) {
    var classloader;
    (function (classloader) {
        (function (LoadType) {
            LoadType[LoadType["SCRIPT"] = 0] = "SCRIPT";
            LoadType[LoadType["FUNCTION"] = 1] = "FUNCTION";
            LoadType[LoadType["EVAL"] = 2] = "EVAL";
        })(classloader.LoadType || (classloader.LoadType = {}));
        var LoadType = classloader.LoadType;
    })(classloader = ho.classloader || (ho.classloader = {}));
})(ho || (ho = {}));

var ho;
(function (ho) {
    var classloader;
    (function (classloader) {
        classloader.mapping = {};
        var ClassLoader = (function () {
            function ClassLoader(c) {
                this.conf = {};
                this.cache = {};
                this.conf = new classloader.LoaderConfig(c);
            }
            ClassLoader.prototype.config = function (c) {
                this.conf = new classloader.LoaderConfig(c);
            };
            ClassLoader.prototype.load = function (arg) {
                arg = new classloader.LoadArguments(arg, this.resolveUrl.bind(this));
                switch (this.conf.loadType) {
                    case classloader.LoadType.SCRIPT:
                        return this.load_script(arg);
                        break;
                    case classloader.LoadType.FUNCTION:
                        return this.load_function(arg);
                        break;
                    case classloader.LoadType.EVAL:
                        return this.load_eval(arg);
                        break;
                }
            };
            ClassLoader.prototype.load_script = function (arg) {
                var self = this;
                var parents = [];
                var p = new ho.promise.Promise();
                if (this.conf.cache && !!this.cache[arg.name])
                    return ho.promise.Promise.create([this.cache[arg.name]]);
                if (!!arg.parent) {
                    this.getParentName(arg.url)
                        .then(function (parentName) {
                        //if(arg.super === parentName)
                        if (arg.super.indexOf(parentName) !== -1)
                            return [];
                        else
                            return self.load({ name: parentName, parent: true, expose: arg.expose, super: arg.super });
                    })
                        .then(function (p) {
                        parents = p;
                        return load_internal();
                    })
                        .then(function (clazz) {
                        if (self.conf.cache)
                            self.cache[arg.name] = clazz;
                        parents = parents.concat(clazz);
                        p.resolve(parents);
                    });
                }
                else {
                    load_internal()
                        .then(function (clazz) {
                        p.resolve(clazz);
                    });
                }
                return p;
                function load_internal() {
                    var _this = this;
                    return new ho.promise.Promise(function (resolve, reject) {
                        var src = arg.url;
                        var script = document.createElement('script');
                        script.onload = function () {
                            if (typeof classloader.util.get(arg.name) === 'function')
                                resolve([classloader.util.get(arg.name)]);
                            else
                                reject("Error while loading Class " + arg.name);
                        }.bind(_this);
                        script.src = src;
                        document.getElementsByTagName('head')[0].appendChild(script);
                    });
                }
            };
            ClassLoader.prototype.load_function = function (arg) {
                var self = this;
                var parents = [];
                var source;
                return classloader.xhr.get(arg.url)
                    .then(function (src) {
                    source = src;
                    if (!!arg.parent) {
                        var parentName = self.parseParentFromSource(src);
                        //if(arg.super === parentName)
                        if (arg.super.indexOf(parentName) !== -1)
                            return [];
                        else
                            return self.load({ name: parentName, parent: true, expose: arg.expose, super: arg.super });
                    }
                })
                    .then(function (p) {
                    parents = p;
                    var src = source + "\nreturn " + arg.name + "\n//#sourceURL=" + window.location.href + arg.url;
                    var clazz = new Function(src)();
                    if (arg.expose)
                        classloader.util.expose(arg.name, clazz);
                    return clazz;
                })
                    .then(function (clazz) {
                    if (self.conf.cache)
                        self.cache[arg.name] = clazz;
                    parents.push(clazz);
                    return parents;
                });
            };
            ClassLoader.prototype.load_eval = function (arg) {
                var self = this;
                var parents = [];
                var source;
                return classloader.xhr.get(arg.url)
                    .then(function (src) {
                    source = src;
                    if (!!arg.parent) {
                        var parentName = self.parseParentFromSource(src);
                        //if(arg.super === parentName)
                        if (arg.super.indexOf(parentName) !== -1)
                            return [];
                        else
                            return self.load({ name: parentName, parent: true, expose: arg.expose, super: arg.super });
                    }
                })
                    .then(function (p) {
                    parents = p;
                    var ret = "\n(function(){return " + arg.name + ";})();";
                    var src = source + ret + "\n//#sourceURL=" + window.location.href + arg.url;
                    var clazz = eval(src);
                    if (arg.expose)
                        classloader.util.expose(arg.name, clazz);
                    return clazz;
                })
                    .then(function (clazz) {
                    if (self.conf.cache)
                        self.cache[arg.name] = clazz;
                    parents.push(clazz);
                    return parents;
                });
            };
            ClassLoader.prototype.getParentName = function (url) {
                var self = this;
                return classloader.xhr.get(url)
                    .then(function (src) {
                    return self.parseParentFromSource(src);
                });
            };
            ClassLoader.prototype.parseParentFromSource = function (src) {
                var r_super = /}\)\((.*)\);/;
                var match = src.match(r_super);
                if (match)
                    return match[1];
                else
                    return undefined;
            };
            ClassLoader.prototype.resolveUrl = function (name) {
                if (!!classloader.mapping[name])
                    return classloader.mapping[name];
                if (this.conf.useDir) {
                    name += '.' + name.split('.').pop();
                }
                name = name.split('.').join('/');
                if (this.conf.useMin)
                    name += '.min';
                return this.conf.urlTemplate.replace('${name}', name);
            };
            ClassLoader.prototype.exists = function (name) {
                return !!this.cache[name];
            };
            return ClassLoader;
        })();
        classloader.ClassLoader = ClassLoader;
    })(classloader = ho.classloader || (ho.classloader = {}));
})(ho || (ho = {}));

/// <reference path="../../../bower_components/ho-promise/dist/promise.d.ts"/>
var ho;
(function (ho) {
    var classloader;
    (function (classloader) {
        var loader = new classloader.ClassLoader();
        function config(c) {
            loader.config(c);
        }
        classloader.config = config;
        ;
        function load(arg) {
            return loader.load(arg);
        }
        classloader.load = load;
        ;
    })(classloader = ho.classloader || (ho.classloader = {}));
})(ho || (ho = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9oby9jbGFzc2xvYWRlci91dGlsL2dldC50cyIsInNyYy9oby9jbGFzc2xvYWRlci91dGlsL2V4cG9zZS50cyIsInNyYy9oby9jbGFzc2xvYWRlci94aHIvZ2V0LnRzIiwic3JjL2hvL2NsYXNzbG9hZGVyL3R5cGVzLnRzIiwic3JjL2hvL2NsYXNzbG9hZGVyL2xvYWRhcmd1bWVudHMudHMiLCJzcmMvaG8vY2xhc3Nsb2FkZXIvbG9hZGVyY29uZmlnLnRzIiwic3JjL2hvL2NsYXNzbG9hZGVyL2xvYWR0eXBlLnRzIiwic3JjL2hvL2NsYXNzbG9hZGVyL2NsYXNzbG9hZGVyLnRzIiwic3JjL2hvL2NsYXNzbG9hZGVyL21haW4udHMiXSwibmFtZXMiOlsiaG8iLCJoby5jbGFzc2xvYWRlciIsImhvLmNsYXNzbG9hZGVyLnV0aWwiLCJoby5jbGFzc2xvYWRlci51dGlsLmdldCIsImhvLmNsYXNzbG9hZGVyLnV0aWwuZXhwb3NlIiwiaG8uY2xhc3Nsb2FkZXIueGhyIiwiaG8uY2xhc3Nsb2FkZXIueGhyLmdldCIsImhvLmNsYXNzbG9hZGVyLkxvYWRBcmd1bWVudHMiLCJoby5jbGFzc2xvYWRlci5Mb2FkQXJndW1lbnRzLmNvbnN0cnVjdG9yIiwiaG8uY2xhc3Nsb2FkZXIuTG9hZGVyQ29uZmlnIiwiaG8uY2xhc3Nsb2FkZXIuTG9hZGVyQ29uZmlnLmNvbnN0cnVjdG9yIiwiaG8uY2xhc3Nsb2FkZXIuTG9hZFR5cGUiLCJoby5jbGFzc2xvYWRlci5DbGFzc0xvYWRlciIsImhvLmNsYXNzbG9hZGVyLkNsYXNzTG9hZGVyLmNvbnN0cnVjdG9yIiwiaG8uY2xhc3Nsb2FkZXIuQ2xhc3NMb2FkZXIuY29uZmlnIiwiaG8uY2xhc3Nsb2FkZXIuQ2xhc3NMb2FkZXIubG9hZCIsImhvLmNsYXNzbG9hZGVyLkNsYXNzTG9hZGVyLmxvYWRfc2NyaXB0IiwiaG8uY2xhc3Nsb2FkZXIuQ2xhc3NMb2FkZXIubG9hZF9zY3JpcHQubG9hZF9pbnRlcm5hbCIsImhvLmNsYXNzbG9hZGVyLkNsYXNzTG9hZGVyLmxvYWRfZnVuY3Rpb24iLCJoby5jbGFzc2xvYWRlci5DbGFzc0xvYWRlci5sb2FkX2V2YWwiLCJoby5jbGFzc2xvYWRlci5DbGFzc0xvYWRlci5nZXRQYXJlbnROYW1lIiwiaG8uY2xhc3Nsb2FkZXIuQ2xhc3NMb2FkZXIucGFyc2VQYXJlbnRGcm9tU291cmNlIiwiaG8uY2xhc3Nsb2FkZXIuQ2xhc3NMb2FkZXIucmVzb2x2ZVVybCIsImhvLmNsYXNzbG9hZGVyLkNsYXNzTG9hZGVyLmV4aXN0cyIsImhvLmNsYXNzbG9hZGVyLmNvbmZpZyIsImhvLmNsYXNzbG9hZGVyLmxvYWQiXSwibWFwcGluZ3MiOiJBQUFBLElBQU8sRUFBRSxDQVFSO0FBUkQsV0FBTyxFQUFFO0lBQUNBLElBQUFBLFdBQVdBLENBUXBCQTtJQVJTQSxXQUFBQSxXQUFXQTtRQUFDQyxJQUFBQSxJQUFJQSxDQVF6QkE7UUFScUJBLFdBQUFBLElBQUlBLEVBQUNBLENBQUNBO1lBRTNCQyxhQUFvQkEsSUFBWUEsRUFBRUEsR0FBZ0JBO2dCQUFoQkMsbUJBQWdCQSxHQUFoQkEsWUFBZ0JBO2dCQUNqREEsSUFBSUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBQUEsSUFBSUE7b0JBQ3ZCQSxHQUFHQSxHQUFHQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtnQkFDakJBLENBQUNBLENBQUNBLENBQUFBO2dCQUNGQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQTtZQUNaQSxDQUFDQTtZQUxlRCxRQUFHQSxNQUtsQkEsQ0FBQUE7UUFDRkEsQ0FBQ0EsRUFScUJELElBQUlBLEdBQUpBLGdCQUFJQSxLQUFKQSxnQkFBSUEsUUFRekJBO0lBQURBLENBQUNBLEVBUlNELFdBQVdBLEdBQVhBLGNBQVdBLEtBQVhBLGNBQVdBLFFBUXBCQTtBQUFEQSxDQUFDQSxFQVJNLEVBQUUsS0FBRixFQUFFLFFBUVI7O0FDUkQsSUFBTyxFQUFFLENBaUJSO0FBakJELFdBQU8s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QUFBLFdBQVdBLENBYXBCQTtJQWJTQSxXQUFBQSxXQUFXQSxFQUFDQSxDQUFDQTtRQUV0QkMsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsdUJBQVdBLEVBQUVBLENBQUNBO1FBRS9CQSxnQkFBdUJBLENBQWdCQTtZQUN0Q3VCLE1BQU1BLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQ2xCQSxDQUFDQTtRQUZldkIsa0JBQU1BLFNBRXJCQSxDQUFBQTtRQUFBQSxDQUFDQTtRQUVGQSxjQUFxQkEsR0FBbUJBO1lBQ3ZDd0IsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDekJBLENBQUNBO1FBRmV4QixnQkFBSUEsT0FFbkJBLENBQUFBO1FBQUFBLENBQUNBO0lBR0hBLENBQUNBLEVBYlNELFdBQVdBLEdBQVhBLGNBQVdBLEtBQVhBLGNBQVdBLFFBYXBCQTtBQUFEQSxDQUFDQSxFQWJNLEVBQUUsS0FBRixFQUFFLFFBYVIiLCJmaWxlIjoiY2xhc3Nsb2FkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUgaG8uY2xhc3Nsb2FkZXIudXRpbCB7XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIGdldChwYXRoOiBzdHJpbmcsIG9iajphbnkgPSB3aW5kb3cpOiBhbnkge1xuXHRcdHBhdGguc3BsaXQoJy4nKS5tYXAocGFydCA9PiB7XG5cdFx0XHRvYmogPSBvYmpbcGFydF07XG5cdFx0fSlcblx0XHRyZXR1cm4gb2JqO1xuXHR9XG59XG4iLCJtb2R1bGUgaG8uY2xhc3Nsb2FkZXIudXRpbCB7XG5cdGV4cG9ydCBmdW5jdGlvbiBleHBvc2UobmFtZTpzdHJpbmcsIG9iajphbnkpIHtcblx0XHRsZXQgcGF0aCA9IG5hbWUuc3BsaXQoJy4nKTtcblx0XHRuYW1lID0gcGF0aC5wb3AoKTtcblxuXHRcdGxldCBnbG9iYWwgPSB3aW5kb3c7XG5cblx0XHRwYXRoLm1hcChwYXJ0ID0+IHtcblx0XHRcdGdsb2JhbFtwYXJ0XSA9IGdsb2JhbFtwYXJ0XSB8fCB7fTtcblx0XHRcdGdsb2JhbCA9IGdsb2JhbFtwYXJ0XTtcblx0XHR9KVxuXG5cdFx0aWYoISFnbG9iYWxbbmFtZV0pXG5cdFx0XHR0aHJvdyBcIkdsb2JhbCBvYmplY3QgXCIgKyBwYXRoLmpvaW4oJy4nKSArIFwiLlwiICsgbmFtZSArIFwiIGFscmVhZHkgZXhpc3RzXCI7XG5cblx0XHRnbG9iYWxbbmFtZV0gPSBvYmo7XG5cdH1cbn1cbiIsIm1vZHVsZSBoby5jbGFzc2xvYWRlci54aHIge1xuXG5cdGV4cG9ydCBmdW5jdGlvbiBnZXQodXJsOiBzdHJpbmcpOiBoby5wcm9taXNlLlByb21pc2U8c3RyaW5nLCBzdHJpbmc+IHtcblx0XHRyZXR1cm4gbmV3IGhvLnByb21pc2UuUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgICAgICAgICAgICBsZXQgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZih4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3AgPSB4bWxodHRwLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbGh0dHAuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgeG1saHR0cC5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgICAgICAgICAgIHhtbGh0dHAuc2VuZCgpO1xuICAgICAgICAgICAgfSk7XG5cdH1cbn1cbiIsIm1vZHVsZSBoby5jbGFzc2xvYWRlciB7XG5cblx0ZXhwb3J0IHR5cGUgY2xhenogPSBGdW5jdGlvbjtcblx0ZXhwb3J0IHR5cGUgUHJvbWlzZU9mQ2xhc3NlcyA9IGhvLnByb21pc2UuUHJvbWlzZTxjbGF6eltdLCBhbnk+O1xuXG59XG4iLCJtb2R1bGUgaG8uY2xhc3Nsb2FkZXIge1xuXG5cdGV4cG9ydCBpbnRlcmZhY2UgSUxvYWRBcmd1bWVudHMge1xuXHRcdG5hbWU/OiBzdHJpbmc7XG5cdFx0dXJsPzogc3RyaW5nO1xuXHRcdHBhcmVudD86IGJvb2xlYW47XG5cdFx0ZXhwb3NlPzogYm9vbGVhbjtcblx0XHRzdXBlcj86IEFycmF5PHN0cmluZz47XG5cdH1cblxuXHRleHBvcnQgY2xhc3MgTG9hZEFyZ3VtZW50cyBpbXBsZW1lbnRzIElMb2FkQXJndW1lbnRzIHtcblxuXHRcdG5hbWU6IHN0cmluZztcblx0XHR1cmw6IHN0cmluZztcblx0XHRwYXJlbnQ6IGJvb2xlYW47XG5cdFx0ZXhwb3NlOiBib29sZWFuO1xuXHRcdHN1cGVyOiBBcnJheTxzdHJpbmc+O1xuXG5cdFx0Y29uc3RydWN0b3IoYXJnOiBJTG9hZEFyZ3VtZW50cywgcmVzb2x2ZVVybDogKG5hbWU6c3RyaW5nKT0+c3RyaW5nKSB7XG5cdFx0XHR0aGlzLm5hbWUgPSBhcmcubmFtZTtcblx0XHRcdHRoaXMudXJsID0gYXJnLnVybCB8fCByZXNvbHZlVXJsKGFyZy5uYW1lKTtcblx0XHRcdHRoaXMucGFyZW50ID0gYXJnLnBhcmVudCB8fCB0cnVlO1xuXHRcdFx0dGhpcy5leHBvc2UgPSBhcmcuZXhwb3NlIHx8IHRydWU7XG5cdFx0XHR0aGlzLnN1cGVyID0gYXJnLnN1cGVyO1xuXHRcdH1cblxuXHR9XG5cbn1cbiIsIm1vZHVsZSBoby5jbGFzc2xvYWRlciB7XG5cblx0ZXhwb3J0IGludGVyZmFjZSBJTG9hZGVyQ29uZmlnIHtcblx0XHRsb2FkVHlwZT86IExvYWRUeXBlO1xuXHRcdHVybFRlbXBsYXRlPzogc3RyaW5nO1xuXHRcdHVzZURpcj86IGJvb2xlYW47XG5cdFx0dXNlTWluPzogYm9vbGVhbjtcblx0XHQvL2V4aXN0cz86IChuYW1lOiBzdHJpbmcpPT5ib29sZWFuO1xuXHRcdGNhY2hlPzogYm9vbGVhbjtcblx0fVxuXG5cdGV4cG9ydCBjbGFzcyBMb2FkZXJDb25maWcgaW1wbGVtZW50cyBJTG9hZGVyQ29uZmlnIHtcblxuXHRcdGxvYWRUeXBlOiBMb2FkVHlwZTtcblx0XHR1cmxUZW1wbGF0ZTogc3RyaW5nO1xuXHRcdHVzZURpcjogYm9vbGVhbjtcblx0XHR1c2VNaW46IGJvb2xlYW47XG5cdFx0Ly9leGlzdHM6IChuYW1lOiBzdHJpbmcpPT5ib29sZWFuO1xuXHRcdGNhY2hlOiBib29sZWFuO1xuXG5cdFx0Y29uc3RydWN0b3IoYzogSUxvYWRlckNvbmZpZyA9IDxJTG9hZGVyQ29uZmlnPnt9KSB7XG5cdFx0XHR0aGlzLmxvYWRUeXBlID0gYy5sb2FkVHlwZSB8fCBMb2FkVHlwZS5FVkFMO1xuXHRcdFx0dGhpcy51cmxUZW1wbGF0ZSA9IGMudXJsVGVtcGxhdGUgfHwgXCIke25hbWV9LmpzXCJcblx0XHRcdHRoaXMudXNlRGlyID0gdHlwZW9mIGMudXNlRGlyID09PSAnYm9vbGVhbicgPyBjLnVzZURpciA6IHRydWU7XG5cdFx0XHR0aGlzLnVzZU1pbiA9IHR5cGVvZiBjLnVzZU1pbiA9PT0gJ2Jvb2xlYW4nID8gYy51c2VNaW4gOiBmYWxzZTtcblx0XHRcdC8vdGhpcy5leGlzdHMgPSBjLmV4aXN0cyB8fCB0aGlzLmV4aXN0cy5iaW5kKHRoaXMpO1xuXHRcdFx0dGhpcy5jYWNoZSA9IHR5cGVvZiBjLmNhY2hlID09PSAnYm9vbGVhbicgPyBjLmNhY2hlIDogdHJ1ZTtcblx0XHR9XG5cblx0fVxuXG59XG4iLCJtb2R1bGUgaG8uY2xhc3Nsb2FkZXIge1xuXG5cdGV4cG9ydCBlbnVtIExvYWRUeXBlIHtcblx0XHRTQ1JJUFQsXG5cdFx0RlVOQ1RJT04sXG5cdFx0RVZBTFxuXHR9XG5cdFxufVxuIiwibW9kdWxlIGhvLmNsYXNzbG9hZGVyIHtcblxuXHRleHBvcnQgbGV0IG1hcHBpbmc6IHtba2V5OnN0cmluZ106IHN0cmluZ30gPSB7fVxuXG5cdGV4cG9ydCBjbGFzcyBDbGFzc0xvYWRlciB7XG5cblx0XHRwcml2YXRlIGNvbmY6IElMb2FkZXJDb25maWcgPSA8SUxvYWRlckNvbmZpZz57fTtcblx0XHRwcml2YXRlIGNhY2hlOiB7W2tleTpzdHJpbmddOiBGdW5jdGlvbn0gPSB7fVxuXG5cdFx0Y29uc3RydWN0b3IoYz86IElMb2FkZXJDb25maWcpIHtcblx0XHRcdHRoaXMuY29uZiA9IG5ldyBMb2FkZXJDb25maWcoYyk7XG5cdFx0fVxuXG5cdFx0Y29uZmlnKGM6IElMb2FkZXJDb25maWcpOiB2b2lkIHtcblx0XHRcdHRoaXMuY29uZiA9IG5ldyBMb2FkZXJDb25maWcoYyk7XG5cdFx0fVxuXG5cdFx0bG9hZChhcmc6IElMb2FkQXJndW1lbnRzKSB7XG5cdFx0XHRhcmcgPSBuZXcgTG9hZEFyZ3VtZW50cyhhcmcsIHRoaXMucmVzb2x2ZVVybC5iaW5kKHRoaXMpKTtcblxuXHRcdFx0c3dpdGNoKHRoaXMuY29uZi5sb2FkVHlwZSkge1xuXHRcdFx0XHRjYXNlIExvYWRUeXBlLlNDUklQVDpcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5sb2FkX3NjcmlwdChhcmcpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIExvYWRUeXBlLkZVTkNUSU9OOlxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmxvYWRfZnVuY3Rpb24oYXJnKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBMb2FkVHlwZS5FVkFMOlxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmxvYWRfZXZhbChhcmcpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHByb3RlY3RlZCBsb2FkX3NjcmlwdChhcmc6IElMb2FkQXJndW1lbnRzKTogUHJvbWlzZU9mQ2xhc3NlcyB7XG5cdFx0XHRsZXQgc2VsZiA9IHRoaXM7XG5cdFx0XHRsZXQgcGFyZW50cyA9IFtdO1xuXHRcdFx0bGV0IHAgPSBuZXcgaG8ucHJvbWlzZS5Qcm9taXNlPGNsYXp6W10sIGFueT4oKTtcblxuXHRcdFx0aWYodGhpcy5jb25mLmNhY2hlICYmICEhdGhpcy5jYWNoZVthcmcubmFtZV0pXG5cdFx0XHRcdHJldHVybiBoby5wcm9taXNlLlByb21pc2UuY3JlYXRlKFt0aGlzLmNhY2hlW2FyZy5uYW1lXV0pO1xuXG5cdFx0XHRpZighIWFyZy5wYXJlbnQpIHtcblx0XHRcdFx0dGhpcy5nZXRQYXJlbnROYW1lKGFyZy51cmwpXG5cdFx0XHRcdC50aGVuKHBhcmVudE5hbWUgPT4ge1xuXHRcdFx0XHRcdC8vaWYoYXJnLnN1cGVyID09PSBwYXJlbnROYW1lKVxuXHRcdFx0XHRcdGlmKGFyZy5zdXBlci5pbmRleE9mKHBhcmVudE5hbWUpICE9PSAtMSlcblx0XHRcdFx0XHRcdHJldHVybiBbXTtcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRyZXR1cm4gc2VsZi5sb2FkKHtuYW1lOiBwYXJlbnROYW1lLCBwYXJlbnQ6IHRydWUsIGV4cG9zZTogYXJnLmV4cG9zZSwgc3VwZXI6IGFyZy5zdXBlcn0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC50aGVuKHAgPT4ge1xuXHRcdFx0XHRcdHBhcmVudHMgPSBwXG5cdFx0XHRcdFx0cmV0dXJuIGxvYWRfaW50ZXJuYWwoKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LnRoZW4oY2xhenogPT4ge1xuXHRcdFx0XHRcdGlmKHNlbGYuY29uZi5jYWNoZSlcblx0XHRcdFx0XHRcdHNlbGYuY2FjaGVbYXJnLm5hbWVdID0gY2xheno7XG5cdFx0XHRcdFx0cGFyZW50cyA9IHBhcmVudHMuY29uY2F0KGNsYXp6KTtcblx0XHRcdFx0XHRwLnJlc29sdmUocGFyZW50cyk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0bG9hZF9pbnRlcm5hbCgpXG5cdFx0XHRcdC50aGVuKGNsYXp6ID0+IHtcblx0XHRcdFx0XHRwLnJlc29sdmUoY2xhenopO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcDtcblxuXG5cdFx0XHRmdW5jdGlvbiBsb2FkX2ludGVybmFsKCk6IFByb21pc2VPZkNsYXNzZXMge1xuXHRcdFx0XHRyZXR1cm4gbmV3IGhvLnByb21pc2UuUHJvbWlzZTxjbGF6eltdLCBhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0XHRsZXQgc3JjID0gYXJnLnVybDtcblx0XHRcdFx0XHRsZXQgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdFx0XHRcdFx0c2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYodHlwZW9mIHV0aWwuZ2V0KGFyZy5uYW1lKSA9PT0gJ2Z1bmN0aW9uJylcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShbdXRpbC5nZXQoYXJnLm5hbWUpXSk7XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdHJlamVjdChgRXJyb3Igd2hpbGUgbG9hZGluZyBDbGFzcyAke2FyZy5uYW1lfWApXG5cdFx0XHRcdFx0fS5iaW5kKHRoaXMpO1xuXHRcdFx0XHRcdHNjcmlwdC5zcmMgPSBzcmM7XG5cdFx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHByb3RlY3RlZCBsb2FkX2Z1bmN0aW9uKGFyZzogSUxvYWRBcmd1bWVudHMpOiBQcm9taXNlT2ZDbGFzc2VzIHtcblx0XHRcdGxldCBzZWxmID0gdGhpcztcblx0XHRcdGxldCBwYXJlbnRzID0gW107XG5cdFx0XHRsZXQgc291cmNlO1xuXG5cdFx0XHRyZXR1cm4geGhyLmdldChhcmcudXJsKVxuXHRcdFx0LnRoZW4oc3JjID0+IHtcblx0XHRcdFx0c291cmNlID0gc3JjO1xuXHRcdFx0XHRpZighIWFyZy5wYXJlbnQpIHtcblx0XHRcdFx0XHRsZXQgcGFyZW50TmFtZSA9IHNlbGYucGFyc2VQYXJlbnRGcm9tU291cmNlKHNyYyk7XG5cdFx0XHRcdFx0Ly9pZihhcmcuc3VwZXIgPT09IHBhcmVudE5hbWUpXG5cdFx0XHRcdFx0aWYoYXJnLnN1cGVyLmluZGV4T2YocGFyZW50TmFtZSkgIT09IC0xKVxuXHRcdFx0XHRcdFx0cmV0dXJuIFtdO1xuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdHJldHVybiBzZWxmLmxvYWQoe25hbWU6IHBhcmVudE5hbWUsIHBhcmVudDogdHJ1ZSwgZXhwb3NlOiBhcmcuZXhwb3NlLCBzdXBlcjogYXJnLnN1cGVyfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQudGhlbihwID0+IHtcblx0XHRcdFx0cGFyZW50cyA9IHA7XG5cdFx0XHRcdGxldCBzcmMgPSBzb3VyY2UgKyBcIlxcbnJldHVybiBcIiArIGFyZy5uYW1lICsgXCJcXG4vLyNzb3VyY2VVUkw9XCIgKyB3aW5kb3cubG9jYXRpb24uaHJlZiArIGFyZy51cmw7XG5cdFx0XHRcdGxldCBjbGF6eiA9IG5ldyBGdW5jdGlvbihzcmMpKCk7XG5cdFx0XHRcdGlmKGFyZy5leHBvc2UpXG5cdFx0XHRcdFx0dXRpbC5leHBvc2UoYXJnLm5hbWUsIGNsYXp6KTtcblx0XHRcdFx0cmV0dXJuIGNsYXp6XG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oY2xhenogPT4ge1xuXHRcdFx0XHRpZihzZWxmLmNvbmYuY2FjaGUpXG5cdFx0XHRcdFx0c2VsZi5jYWNoZVthcmcubmFtZV0gPSBjbGF6ejtcblx0XHRcdFx0cGFyZW50cy5wdXNoKGNsYXp6KTtcblx0XHRcdFx0cmV0dXJuIHBhcmVudHM7XG5cdFx0XHR9KVxuXHRcdH1cblxuXHRcdHByb3RlY3RlZCBsb2FkX2V2YWwoYXJnOiBJTG9hZEFyZ3VtZW50cyk6IFByb21pc2VPZkNsYXNzZXMge1xuXHRcdFx0bGV0IHNlbGYgPSB0aGlzO1xuXHRcdFx0bGV0IHBhcmVudHMgPSBbXTtcblx0XHRcdGxldCBzb3VyY2U7XG5cblx0XHRcdHJldHVybiB4aHIuZ2V0KGFyZy51cmwpXG5cdFx0XHQudGhlbihzcmMgPT4ge1xuXHRcdFx0XHRzb3VyY2UgPSBzcmM7XG5cdFx0XHRcdGlmKCEhYXJnLnBhcmVudCkge1xuXHRcdFx0XHRcdGxldCBwYXJlbnROYW1lID0gc2VsZi5wYXJzZVBhcmVudEZyb21Tb3VyY2Uoc3JjKTtcblx0XHRcdFx0XHQvL2lmKGFyZy5zdXBlciA9PT0gcGFyZW50TmFtZSlcblx0XHRcdFx0XHRpZihhcmcuc3VwZXIuaW5kZXhPZihwYXJlbnROYW1lKSAhPT0gLTEpXG5cdFx0XHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0cmV0dXJuIHNlbGYubG9hZCh7bmFtZTogcGFyZW50TmFtZSwgcGFyZW50OiB0cnVlLCBleHBvc2U6IGFyZy5leHBvc2UsIHN1cGVyOiBhcmcuc3VwZXJ9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC50aGVuKHAgPT4ge1xuXHRcdFx0XHRwYXJlbnRzID0gcDtcblx0XHRcdFx0bGV0IHJldCA9IFwiXFxuKGZ1bmN0aW9uKCl7cmV0dXJuIFwiICsgYXJnLm5hbWUgKyBcIjt9KSgpO1wiO1xuXHRcdFx0XHRsZXQgc3JjID0gc291cmNlICsgcmV0ICsgXCJcXG4vLyNzb3VyY2VVUkw9XCIgKyB3aW5kb3cubG9jYXRpb24uaHJlZiArIGFyZy51cmw7XG5cdFx0XHRcdGxldCBjbGF6eiA9IGV2YWwoc3JjKTtcblx0XHRcdFx0aWYoYXJnLmV4cG9zZSlcblx0XHRcdFx0XHR1dGlsLmV4cG9zZShhcmcubmFtZSwgY2xhenopO1xuXHRcdFx0XHRyZXR1cm4gY2xheno7XG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oY2xhenogPT4ge1xuXHRcdFx0XHRpZihzZWxmLmNvbmYuY2FjaGUpXG5cdFx0XHRcdFx0c2VsZi5jYWNoZVthcmcubmFtZV0gPSBjbGF6ejtcblx0XHRcdFx0cGFyZW50cy5wdXNoKGNsYXp6KTtcblx0XHRcdFx0cmV0dXJuIHBhcmVudHM7XG5cdFx0XHR9KVxuXHRcdH1cblxuXHRcdHByb3RlY3RlZCBnZXRQYXJlbnROYW1lKHVybDogc3RyaW5nKTogaG8ucHJvbWlzZS5Qcm9taXNlPHN0cmluZywgYW55PiB7XG5cdFx0XHRsZXQgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHJldHVyblx0eGhyLmdldCh1cmwpXG5cdFx0XHRcdC50aGVuKHNyYyA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIHNlbGYucGFyc2VQYXJlbnRGcm9tU291cmNlKHNyYyk7XG5cdFx0XHRcdH0pXG5cdFx0fVxuXG5cdFx0cHJvdGVjdGVkIHBhcnNlUGFyZW50RnJvbVNvdXJjZShzcmM6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0XHRsZXQgcl9zdXBlciA9IC99XFwpXFwoKC4qKVxcKTsvO1xuXHRcdFx0bGV0IG1hdGNoID0gc3JjLm1hdGNoKHJfc3VwZXIpO1xuXHRcdFx0aWYobWF0Y2gpXG5cdFx0XHRcdHJldHVybiBtYXRjaFsxXTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHRwdWJsaWMgcmVzb2x2ZVVybChuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdFx0aWYoISFtYXBwaW5nW25hbWVdKVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXBwaW5nW25hbWVdO1xuXG5cdFx0XHRpZih0aGlzLmNvbmYudXNlRGlyKSB7XG4gICAgICAgICAgICAgICAgbmFtZSArPSAnLicgKyBuYW1lLnNwbGl0KCcuJykucG9wKCk7XG4gICAgICAgICAgICB9XG5cblx0XHRcdG5hbWUgPSBuYW1lLnNwbGl0KCcuJykuam9pbignLycpO1xuXG5cdFx0XHRpZih0aGlzLmNvbmYudXNlTWluKVxuICAgICAgICAgICAgICAgIG5hbWUgKz0gJy5taW4nXG5cblx0XHRcdHJldHVybiB0aGlzLmNvbmYudXJsVGVtcGxhdGUucmVwbGFjZSgnJHtuYW1lfScsIG5hbWUpO1xuXHRcdH1cblxuXHRcdHByb3RlY3RlZCBleGlzdHMobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0XHRyZXR1cm4gISF0aGlzLmNhY2hlW25hbWVdO1xuXHRcdH1cblx0fVxufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL2Jvd2VyX2NvbXBvbmVudHMvaG8tcHJvbWlzZS9kaXN0L3Byb21pc2UuZC50c1wiLz5cblxubW9kdWxlIGhvLmNsYXNzbG9hZGVyIHtcblxuXHRsZXQgbG9hZGVyID0gbmV3IENsYXNzTG9hZGVyKCk7XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZyhjOiBJTG9hZGVyQ29uZmlnKTogdm9pZCB7XG5cdFx0bG9hZGVyLmNvbmZpZyhjKTtcblx0fTtcblxuXHRleHBvcnQgZnVuY3Rpb24gbG9hZChhcmc6IElMb2FkQXJndW1lbnRzKTogUHJvbWlzZU9mQ2xhc3NlcyB7XG5cdFx0cmV0dXJuIGxvYWRlci5sb2FkKGFyZyk7XG5cdH07XG5cblxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9